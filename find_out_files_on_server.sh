#!/bin/bash
# –ü–æ–∏—Å–∫ –≤—Å–µ—Ö out —Ñ–∞–π–ª–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: ./find_out_files_on_server.sh [remote_directory]

SERVER="root@38.117.87.47"
PORT="44236"
REMOTE_DIR="${1:-~}"  # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–æ–º–∞—à–Ω—è—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è

echo "‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó"
echo "‚ïë  üîç –ü–û–ò–°–ö OUT –§–ê–ô–õ–û–í –ù–ê –°–ï–†–í–ï–†–ï                                            ‚ïë"
echo "‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù"
echo ""
echo "–ü–æ–∏—Å–∫ –≤: $REMOTE_DIR"
echo ""

echo "=== –§–∞–π–ª—ã —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º out_ ==="
ssh -p "$PORT" "$SERVER" "find $REMOTE_DIR -name 'out_*.txt' -o -name 'out_*.out' 2>/dev/null" | head -30

echo ""
echo "=== –§–∞–π–ª—ã —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º .out ==="
ssh -p "$PORT" "$SERVER" "find $REMOTE_DIR -name '*.out' 2>/dev/null" | head -30

echo ""
echo "=== –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ ==="
TOTAL=$(ssh -p "$PORT" "$SERVER" "find $REMOTE_DIR \( -name 'out_*.txt' -o -name 'out_*.out' -o -name '*.out' \) -type f 2>/dev/null | wc -l")
echo "–í—Å–µ–≥–æ –Ω–∞–π–¥–µ–Ω–æ: $TOTAL —Ñ–∞–π–ª–æ–≤"

echo ""
echo "üí° –î–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:"
echo "   ./copy_out_files_from_server.sh"
echo "   –∏–ª–∏"
echo "   ./quick_copy_out_files.sh $REMOTE_DIR"

